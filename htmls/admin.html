<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Admin Page</title>
    <link rel="stylesheet" href="./admin.css">
    <script>
        $(() => {
            const socket = io.connect('http://localhost:3000');

            const invis = () => {
                $('.WRONG_USERNAME').hide();
                $('.WRONG_PASSWORD').hide();
                $('.CONTROL-1').hide();
                $('.CONTROL-2').hide();
                $('.CONTROL-3').hide();
                $('.WRONG_ACCOUNT').hide();
            }

            let BlogTitle;
            let BlogContent;
            let BlogDate;

            const Form = document.getElementById('form');
            const Buton = document.getElementById('ControlButon');
            Buton.value = 'Kontrol için gönder';

            const Username = document.getElementById('username');
            const Password = document.getElementById('password');
            Form.addEventListener('submit', e => {
                e.preventDefault();
                const username = Username.value;
                const password = Password.value;

                socket.emit('AdminControl', { username, password });
            });

            socket.on('WRONG_USERNAME', () => {
                invis();
                $('.control_messages').show();
                $('.WRONG_USERNAME').show();
            });
            socket.on('WRONG_PASSWORD', () => {
                invis();
                $('.control_messages').show();
                $('.WRONG_PASSWORD').show();
            });
            socket.on('CONTROL-1', () => {
                Username.value = '';
                Password.value = '';
                invis();
                $('.control_messages').show();
                $('.CONTROL-1').show();
            });
            socket.on('CONTROL-2', () => {
                invis();
                $('.control_messages').show();
                $('.CONTROL-2').show();
            });
            socket.on('CONTROL-3', () => {
                invis();
                $('.control_messages').show();
                $('.CONTROL-3').show();
            });
            socket.on('WRONG_ACCOUNT_VALUES', () => {
                invis();
                $('.control_messages').show();
                $('.WRONG_ACCOUNT').show();
            });
            socket.on('FIND_ACCOUNT', () => {
                $('.ControlPage').hide();
                $('.firstPage').show();
            });

            $('.writeBlogButton').on('click', () => {
                $('.firstPage').hide();
                $('.secondPage').show();
            });

            $('.ContentButon').on('click', () => {
                const BlogTitleValue = document.getElementById('title');
                const BlogDateValue = document.getElementById('date');
                BlogTitle = BlogTitleValue.value;
                BlogDate = BlogDateValue.value;
                $('.BlogFormHome').hide();
                $('.ContentFormHome').show();
            });

            $('.PreviewButon').on('click', () => {
                const BlogContentValue = document.getElementById('content');
                BlogContent = BlogContentValue.value;
                $('.ContentFormHome').hide();
                $('.PreviewPage').show();
                $('.PreviewBlogTitle').html(BlogTitle);
                $('.PreviewBlogContent').html(`<a class="space">....</a>${BlogContent}`);
                $('.PreviewBlogDate').html(BlogDate);
                $('.SaveButtonHome').show();
            });

            $('.SaveButton').on('click', () => {
                socket.emit('NEW_BLOG', { BlogTitle, BlogContent, BlogDate });
            });

            socket.on('TRUE_BLOG_SAVE', () => {
                $('.PreviewPage').hide();
                $('.SaveButtonHome').hide();
                $('.messages').show();
                $('.true_blog_save').show();
                $('.wrong_blog_save').hide();
            });

            socket.on('WRONG_BLOG_SAVE', () => {
                $('.PreviewPage').hide();
                $('.SaveButtonHome').hide();
                $('.messages').show();
                $('.true_blog_save').hide();
                $('.wrong_blog_save').show();
            });
        });
    </script>
</head>
<body>
    <div class="ControlPage">
        <div class="top">
            <h1 class="title">AdminPage</h1> <br>
            <hr class="hr">
        </div>
        <div class="ControlFormHome">
            <form id="form">
                Kullanıcı adı ? <br>
                <input type="text" id="username", autocomplete='off'> <br>
                Şifre <br>
                <input type="password" id="password", autocomplete='off'> <br>
                <input type="submit" id="ControlButon">
            </form>
        </div>
        <div class="control_messages">
            <div class="WRONG_USERNAME">Kullanıcı adı girmediniz</div>
            <div class="WRONG_PASSWORD">Şifre girmediniz</div>
            <div class="CONTROL-1">Kontrol ediliyor.</div>
            <div class="CONTROL-2">Kontrol ediliyor..</div>
            <div class="CONTROL-3">Kontrol ediliyor...</div>
            <div class="WRONG_ACCOUNT">Kullanıcı adı veya şifreniz hatalı</div>
        </div>
    </div>
    <div class="firstPage">
        <div class="top-box">
            <h1 class="hero-title">Admin Page</h1>
            <hr class="hr">
        </div>
        <div class="butonHome">
            <button class="writeBlogButton">Blog yaz !</button>
        </div>
    </div>
    <div class="secondPage">
        <div class="top-box">
            <h1 class="hero-title">Blog</h1>
            <hr class="hr">
        </div>
        <div class="BlogFormHome">
            <div class="one">
                <form id="blogForm">
                    <div class="titleFormHome">
                        <div class="formTitle"><b> Title </b></div>
                        <input type="text" id="title" autocomplete="off">
                    </div>
                    <div class="dateFormHome">
                        <div class="formDate"><b> Date </b></div>
                        <input type="text" id="date" autocomplete="off">
                    </div>
                </form>
                <div class="ContentButonHome">
                    <button class="ContentButon">İçerik için devam et</button>
                </div>
            </div>
        </div>
        <div class="ContentFormHome">
            <div class="two">
                <form id="ContentForm">
                    <div class="contentTitle">
                        <div class="formTitle"><b> Content </b></div>
                        <input type="text" id="content" autocomplete="off">
                    </div>
                </form>
            </div>
            <div class="PreviewButonHome">
                <button class="PreviewButon">Önizle</button>
            </div>
        </div>
        <div class="PreviewPage">
            <div class="PreviewBlogTitle"></div> <br>
            <div class="PreviewBlogContent"></div> <br>
            <div class="PreviewBlogDate"></div>
        </div>
        <div class="SaveButtonHome">
            <button class="SaveButton">Kaydet</button>
        </div>
        <div class="messages">
            <div class="true_blog_save">Başarıyla kayıt edildi</div>
            <div class="wrong_blog_save">Kaydedilirken bir hatayla karşılaşıldı</div>
        </div>
    </div>
</body>
</html>